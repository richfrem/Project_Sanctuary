---
config:
  theme: base
---
flowchart TB
 subgraph Init["1. Initialize <BR>(get base bundle)"]
        Load["<b style='color:#1E90FF'>/context-bundler_init</b> [ID] [TYPE]<br><i>(Wrapper: cli.py context)</i><br>Outputs: file-manifest.json âžœ Generates: ID_context.md"]
  end
 subgraph Review["2. Review Context"]
        Read["<b style='color:#1E90FF'>view_file</b> temp/context-bundles/ID_context.md<br><i>(Manual Verification Step)</i><br>Checks: Source Code, RLM Summaries, Dependencies<br>+ Cross-Ref: Existing Overview (if any)"]
        Valid{"Complete?"}
  end
 subgraph Augment["3. Augment (if needed)"]
        AddFiles["<b style='color:#1E90FF'>context_bundler.add</b> [PATH]<br>Add missing files"]
        Regen["<b style='color:#1E90FF'>context_bundler.bundle</b> (Regenerate)"]
  end
 subgraph Execute["4. Deep Dive (LLM Phase)"]
        Analyze["<b style='color:#1E90FF'>legacy_system_oracle_forms.investigate_form</b> [ID]<br><b style='color:#1E90FF'>dependency_analysis.retrieve_dependency_graph</b> [ID]<br><b style='color:#1E90FF'>legacy_system_oracle_forms.codify_form</b> [ID]"]
  end
 subgraph Finish["5. Post-Process"]
        Post["<b style='color:#1E90FF'>legacy_system_oracle_forms.curate_enrich_links</b><br><b style='color:#1E90FF'>rlm_factory.distill</b><br><b style='color:#1E90FF'>vector_db.ingest</b><br><b style='color:#1E90FF'>inventory_manager.curate_inventories</b>"]
  end
    Start(["ðŸš€ Start Analysis<br>Command: <b style='color:#1E90FF'>legacy_system_oracle_forms.codify_form</b> [ID]"]) --> Load
    Load --> Read
    Read --> Valid
    Valid -- No: Gaps --> AddFiles
    AddFiles --> Regen
    Regen -- recursively include</br>additional key context --> Read
    Valid -- Yes: Ready --> Analyze
    Analyze --> Post
    Post --> Done(["âœ… Complete"])

    style Valid fill:#FFD700
    style Start fill:#90EE90
    style Done fill:#90EE90