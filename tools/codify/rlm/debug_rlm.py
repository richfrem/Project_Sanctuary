#!/usr/bin/env python3
"""
debug_rlm.py (CLI)
=====================================

Purpose:
    Debug utility to inspect the RLMConfiguration state.
    Verifies path resolution, manifest loading, and environment variable overrides.
    Useful for troubleshooting cache path conflicts and RLM factory resolution.

Layer: Codify / Rlm

Usage Examples:
    python tools/codify/rlm/debug_rlm.py

CLI Arguments:
    None

Input Files:
    - tools/standalone/rlm-factory/manifest-index.json
    - .env

Output:
    - Console output (State inspection of RLMConfig)

Key Functions:
    - RLMConfig(): Instantiated to test path resolution logic.

Script Dependencies:
    - tools/codify/rlm/rlm_config.py

Consumed by:
    - Developers (Manual debugging)
"""
import os
import sys
from pathlib import Path

# Setup path
SCRIPT_DIR = Path(__file__).parent.resolve()
PROJECT_ROOT = SCRIPT_DIR.parent.parent.parent
sys.path.append(str(PROJECT_ROOT))

# Debug Env
# Debug Env

try:
    from tools.codify.rlm.rlm_config import RLMConfig
    
    print("\n--- Testing RLMConfig(type='tool') ---")
    config = RLMConfig(run_type="tool")
    print(f"Config Type: {config.type}")
    print(f"Manifest Path: {config.manifest_path}")
    print(f"Cache Path: {config.cache_path}")
    print(f"Prompt Template Length: {len(config.prompt_template)}")
    
    print("\n--- Testing RLMConfig(type='sanctuary') ---")
    config = RLMConfig(run_type="sanctuary")
    print(f"Config Type: {config.type}")
    print(f"Manifest Path: {config.manifest_path}")
    print(f"Cache Path: {config.cache_path}")
    
except ImportError as e:
    print(f"Import Error: {e}")
except Exception as e:
    print(f"Error: {e}")
