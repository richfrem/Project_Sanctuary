---
config:
  layout: dagre
  theme: base
---

%% Name: Link Checker Workflow
%% Description: Sequence for validating and repairing broken documentation links
%% Location: docs/architecture_diagrams/workflows/link_checker_workflow.mmd

flowchart TB
    subgraph Detection["Phase 1: Detection"]
        direction TB
        Start["Start Link Validation"] --> Choice{Which Method?}
        
        Choice -- "Comprehensive" --> VerifyLinks["/link-checker_check<br/>(Full Audit)"]
        Choice -- "Quick Check" --> CheckBroken["/link-checker_check<br/>(Surface Check)"]
        
        VerifyLinks --> Report1["Output: Report"]
        CheckBroken --> Report2["Output: Log"]
    end
    
    subgraph Repair["Phase 2: Auto-Repair"]
        direction TB
        MapFiles["/link-checker_map"] --> Inventory["Output: Inventory"]
        Inventory --> DryRun["/link-checker_fix --dry-run"]
        DryRun --> Review{Review Changes?}
        Review -- "Approve" --> Fix["/link-checker_fix"]
        Review -- "Reject" --> Manual["Manual Fixes"]
        Fix --> Fixed["Links Repaired"]
    end
    
    subgraph Verify["Phase 3: Verification"]
        direction TB
        ReCheck["Re-run /link-checker_check"] --> Clean{Clean Report?}
        Clean -- "Yes" --> Success["âœ… Documentation Healthy"]
        Clean -- "No" --> Manual2["Manual Fixes Needed"]
    end
    
    %% Flow connections
    Report1 --> HasIssues{Issues Found?}
    Report2 --> HasIssues
    
    HasIssues -- "Yes" --> MapFiles
    HasIssues -- "No" --> Success
    
    Fixed --> ReCheck
    Manual --> ReCheck
    Manual2 --> MapFiles

    %% Styles
    style Start fill:#dfd,stroke:#333,stroke-width:2px
    style Success fill:#dfd,stroke:#333,stroke-width:2px
    style VerifyLinks fill:#cce5ff,stroke:#004085,stroke-width:2px
    style Fix fill:#fff3cd,stroke:#856404,stroke-width:2px
    
    %% Metadata
    %% Last Updated: 2026-01-11
