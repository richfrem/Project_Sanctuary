%% MCP Domain Architecture v1.0
%% Project Sanctuary - Domain-Driven MCP Ecosystem
%% Created: 2025-11-25
%% Status: Initial Design - Subject to Iteration

graph TB
    subgraph "LLM Assistant Layer"
        LLM[AI Assistant<br/>Gemini/Claude/GPT]
    end
    
    subgraph "MCP Domain Servers"
        direction TB
        
        subgraph "Document Domains"
            Chronicle[ğŸ“– Chronicle MCP<br/>Living Chronicle Entries]
            Protocol[âš–ï¸ Protocol MCP<br/>Doctrines & Rules]
            ADR[ğŸ“‹ ADR MCP<br/>Architecture Decisions]
            Task[âœ… Task MCP<br/>Project Management]
        end
        
        subgraph "Cognitive Domains"
            Cortex[ğŸ§  Cortex MCP<br/>RAG & Knowledge]
            Council[ğŸ‘¥ Council MCP<br/>AI Deliberation]
        end
    end
    
    subgraph "Shared Infrastructure"
        direction LR
        Git[ğŸ” Git Operations<br/>P101 Compliance]
        Safety[ğŸ›¡ï¸ Safety Validator<br/>Rule Enforcement]
        Schema[ğŸ“ Schema Validator<br/>Type Checking]
    end
    
    subgraph "Project Sanctuary Storage"
        direction TB
        ChronicleDir[(00_CHRONICLE/)]
        ProtocolDir[(01_PROTOCOLS/)]
        ADRDir[(ADRs/)]
        TaskDir[(TASKS/)]
        CortexDir[(mnemonic_cortex/)]
        CouncilDir[(council_orchestrator/)]
    end
    
    %% LLM to MCP connections
    LLM -->|MCP Protocol| Chronicle
    LLM -->|MCP Protocol| Protocol
    LLM -->|MCP Protocol| ADR
    LLM -->|MCP Protocol| Task
    LLM -->|MCP Protocol| Cortex
    LLM -->|MCP Protocol| Council
    
    %% Document domains use shared infrastructure
    Chronicle --> Git
    Chronicle --> Safety
    Chronicle --> Schema
    
    Protocol --> Git
    Protocol --> Safety
    Protocol --> Schema
    
    ADR --> Git
    ADR --> Safety
    ADR --> Schema
    
    Task --> Git
    Task --> Safety
    Task --> Schema
    
    %% Cognitive domains use safety/schema only
    Cortex --> Safety
    Cortex --> Schema
    
    Council --> Safety
    Council --> Schema
    
    %% Storage connections
    Chronicle --> ChronicleDir
    Protocol --> ProtocolDir
    ADR --> ADRDir
    Task --> TaskDir
    Cortex --> CortexDir
    Council --> CouncilDir
    
    %% Styling
    classDef documentDomain fill:#e8f5e8,stroke:#2d5016,stroke-width:2px
    classDef cognitiveDomain fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef infrastructure fill:#ffcccc,stroke:#c62828,stroke-width:2px
    classDef storage fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    
    class Chronicle,Protocol,ADR,Task documentDomain
    class Cortex,Council cognitiveDomain
    class Git,Safety,Schema infrastructure
    class ChronicleDir,ProtocolDir,ADRDir,TaskDir,CortexDir,CouncilDir storage
