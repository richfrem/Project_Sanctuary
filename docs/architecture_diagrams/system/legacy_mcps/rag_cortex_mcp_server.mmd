---
config:
  theme: base
---
%% Name: RAG MCP (Cortex) Architecture
%% Source: docs/mcp_servers/architecture/mcp_ecosystem_architecture_v3.md
%% Location: docs/architecture_diagrams/system/rag_cortex_mcp_server.mmd
%% Description: Architecture and tool flow for RAG Cortex MCP Server

graph LR
    subgraph "RAG MCP Tools"
        A[query_cortex]
        B[ingest_document]
        C[update_index]
        D[get_stats]
        E[search_by_metadata]
    end
    
    subgraph "Operations"
        F[Embedding Generation]
        G[Vector Search]
        H[Metadata Filtering]
        I[Index Management]
    end
    
    subgraph "Storage"
        J[ChromaDB]
        K[Document Store]
    end
    
    A --> F
    A --> G
    A --> H
    B --> F
    B --> I
    C --> I
    E --> H
    
    F --> J
    G --> J
    H --> J
    I --> J
    I --> K
    
    D --> J
    
    style A fill:#ccccff
    style B fill:#ccffcc
    style C fill:#ffffcc
    style D fill:#ccccff
    style E fill:#ccccff
