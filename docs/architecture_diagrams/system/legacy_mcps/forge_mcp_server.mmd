---
config:
  theme: base
---
%% Name: Forge (Fine-Tuning) MCP Server Architecture
%% Source: docs/architecture/mcp_servers/architecture/mcp_ecosystem_architecture_v3.md
%% Location: docs/architecture_diagrams/system/forge_mcp_server.mmd
%% Description: Architecture and tool flow for Forge MCP Server

graph LR
    subgraph "Forge MCP Tools"
        A[initialize_forge_environment]
        B[initiate_model_forge]
        C[get_forge_job_status]
        D[package_and_deploy_artifact]
        E[run_inference_test]
        F[publish_to_registry]
        G[retrieve_registry_artifact]
    end

    subgraph "State Machine"
        H{"Environment Active?"}
        I["Job Queue"]
        J["Job Execution (Async)"]
        K["Artifact Verification"]
    end

    subgraph "Resources"
        L[CUDA GPU]
        M[Hugging Face]
        N[Ollama]
    end

    A --> H
    B --> H
    H -->|Yes| I
    I --> J
    J --> L
    C --> J
    D --> K
    E --> K
    K --> N
    F --> M
    G --> M

    style A fill:#ccccff
    style B fill:#ff9999
    style C fill:#ccccff
    style D fill:#ffcccc
    style E fill:#ffcccc
    style F fill:#ff9999
    style G fill:#ccffcc
