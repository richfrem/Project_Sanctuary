---
title: Gateway Registration 3-Layer Pattern
description: Illustration of the 3-Layer Declarative Pattern for fleet registration.
---
flowchart LR
    subgraph Layer1[1. Infrastructure]
        Podman[Podman Compose] -->|Up| Container[Container Running]
        Container -->|Healthcheck| Healthy{Healthy?}
    end

    subgraph Layer2[2. Discovery]
        Healthy -- Yes --> RegistryFile[registry.json]
        RegistryFile -->|Watch| GatewayService
    end

    subgraph Layer3[3. Application]
        GatewayService -->|Load| MCPClient
        MCPClient -->|Inspect| Tools[Available Tools]
        Tools -->|Expose| UserInterface
    end
