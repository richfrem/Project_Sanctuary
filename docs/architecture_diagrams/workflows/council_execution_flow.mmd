---
title: Council MCP Execution Flow
description: Sequence diagram illustrating the interaction between User, LLM, Council, and Cortex.
---
sequenceDiagram
    participant User
    participant LLM as LLM Agent<br/>(Claude/Antigravity)
    participant CouncilMCP as Council MCP Server
    participant PersonaMCP as Agent Persona MCP
    participant CortexMCP as Cortex MCP Server
    
    User->>LLM: "Design and implement Protocol 120"
    LLM->>CouncilMCP: council_dispatch(task="Design Protocol 120")
    
    Note over CouncilMCP: Bootstrap & Cache Warmup
    CouncilMCP->>CortexMCP: cortex_cache_warmup()
    
    CouncilMCP->>CortexMCP: cortex_query("Previous protocols")
    CortexMCP-->>CouncilMCP: Context documents
    
    loop Deliberation Rounds
        CouncilMCP->>PersonaMCP: dispatch(role="coordinator", task=...)
        PersonaMCP-->>CouncilMCP: Coordinator Response
        
        CouncilMCP->>PersonaMCP: dispatch(role="strategist", task=...)
        PersonaMCP-->>CouncilMCP: Strategist Response
        
        CouncilMCP->>PersonaMCP: dispatch(role="auditor", task=...)
        PersonaMCP-->>CouncilMCP: Auditor Response
    end
    
    CouncilMCP-->>LLM: Final Decision (Synthesis)
    LLM-->>User: "Protocol 120 designed"
