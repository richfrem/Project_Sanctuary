---
config:
  theme: base
---
%% Name: MCP Deliberation Workflow
%% Source: docs/architecture/mcp_servers/architecture/mcp_ecosystem_architecture_v3.md
%% Location: docs/architecture_diagrams/workflows/mcp_deliberation_workflow.mmd
%% Description: Workflow example for Research -> Deliberation -> Decision using MCP

sequenceDiagram
    participant LLM as LLM Assistant
    participant Cortex as RAG MCP (Cortex)
    participant Council as Agent Orchestrator MCP (Council)
    participant ADR as ADR MCP
    
    LLM->>Cortex: query_cortex("MCP patterns")
    Cortex-->>LLM: {results: [...]}
    
    LLM->>Council: create_deliberation("Analyze MCP patterns", ...)
    Council-->>LLM: {command_file, status: "queued"}
    
    Note over Council: Council deliberates...
    
    LLM->>Council: get_result(task_id)
    Council-->>LLM: {output_path, content}
    
    LLM->>ADR: create_adr(35, "MCP Composition", ...)
    ADR-->>LLM: {file_path, commit_hash}
