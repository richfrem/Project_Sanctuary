%% ADR MCP Server - Class Diagram
%% Shows status management and supersession tracking
%% Created: 2025-11-25

classDiagram
    class project_sanctuary_document_adr {
        +create_adr(number, title, context, decision, consequences, date?, status?, supersedes?) FileOperationResult
        +update_adr_status(number, new_status, reason) FileOperationResult
        +get_adr(number) ADR
        +list_adrs(status?) QueryResult~ADR~
        +search_adrs(query) QueryResult~ADR~
        -validate_adr_schema(adr) ValidationResult
        -validate_status_transition(current, new) ValidationResult
        -generate_adr_markdown(adr) string
    }
    
    class ADR {
        +number number
        +string title
        +string date
        +string status
        +string context
        +string decision
        +string consequences
        +number[] supersedes
    }
    
    class SafetyValidator {
        +validate_path(path) ValidationResult
        +validate_status_transition(current, new, type) ValidationResult
    }
    
    class SchemaValidator {
        +validate_adr(adr) ValidationResult
    }
    
    class GitOperations {
        +commit_with_manifest(files, message, push?) CommitResult
    }
    
    project_sanctuary_document_adr --> ADR : manages
    project_sanctuary_document_adr --> SafetyValidator : validates with
    project_sanctuary_document_adr --> SchemaValidator : validates with
    project_sanctuary_document_adr --> GitOperations : commits via
    
    note for project_sanctuary_document_adr "Safety Rules:\n- ADR numbers must be sequential\n- Cannot delete (mark superseded)\n- Must follow ADR template\n- Valid status transitions:\n  Proposed → Accepted\n  Accepted → Superseded\n  Proposed → Deprecated"
    
    note for project_sanctuary_document_adr "Status Transitions:\n- Proposed: Initial state\n- Accepted: Approved decision\n- Superseded: Replaced by newer ADR\n- Deprecated: No longer applicable"
