%% Chronicle MCP Server - Class Diagram
%% Shows all operations and their relationships
%% Created: 2025-11-25

classDiagram
    class project_sanctuary_document_chronicle {
        +create_chronicle_entry(entry_number, title, date, author, content, status?, classification?) FileOperationResult
        +update_chronicle_entry(entry_number, updates, reason, override_approval_id?) FileOperationResult
        +get_chronicle_entry(entry_number) ChronicleEntry
        +list_recent_entries(limit?) QueryResult~ChronicleEntry~
        +search_chronicle(query) QueryResult~ChronicleEntry~
        -validate_entry_schema(entry) ValidationResult
        -check_entry_age(entry_number) number
        -generate_entry_markdown(entry) string
    }
    
    class ChronicleEntry {
        +number entry_number
        +string title
        +string date
        +string author
        +string content
        +string status
        +string classification
    }
    
    class SafetyValidator {
        +validate_path(path) ValidationResult
        +get_protection_level(path) ProtectionLevel
        +assess_risk(operation, params) RiskAssessment
    }
    
    class SchemaValidator {
        +validate_chronicle_entry(entry) ValidationResult
    }
    
    class FileOperations {
        +write_to_disk(files, message, push?) FileOperationResult
        +generate_manifest(files) CommitManifest
    }
    
    project_sanctuary_document_chronicle --> ChronicleEntry : manages
    project_sanctuary_document_chronicle --> SafetyValidator : validates with
    project_sanctuary_document_chronicle --> SchemaValidator : validates with
    project_sanctuary_document_chronicle --> FileOperations : commits via
    
    note for project_sanctuary_document_chronicle "Safety Rules:\n- Entry numbers auto-generated\n- Cannot modify entries >7 days old\n  without approval\n- Must follow chronicle format"
