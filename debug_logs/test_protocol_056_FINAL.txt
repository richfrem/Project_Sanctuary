============================= test session starts ==============================
platform darwin -- Python 3.13.4, pytest-8.4.1, pluggy-1.6.0 -- /usr/local/bin/python3
cachedir: .pytest_cache
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/richardfremmerlid/Projects/Project_Sanctuary
configfile: pytest.ini
plugins: benchmark-5.2.3, anyio-4.9.0, langsmith-0.4.31, cov-6.2.1, typeguard-4.4.4
collecting ... collected 1 item

tests/mcp_servers/orchestrator/e2e/test_protocol_056_headless.py::TestProtocol056Headless::test_triple_loop_scenario 
-------------------------------- live log setup --------------------------------
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:21 Starting MCP Server Fleet...
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting code...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.code.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43905)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                         â–„â–€â–€ â–„â–€â–ˆ â–ˆâ–€â–€ â–€â–ˆâ–€ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                         â–ˆâ–€  â–ˆâ–€â–ˆ â–„â–„â–ˆ  â–ˆ  â–ˆ â–€ â–ˆ â–ˆâ–„â–„ â–ˆâ–€â–€                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                FastMCP 2.13.1                                â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                    ðŸ–¥  Server name: project_sanctuary.code                    â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                    ðŸ“¦ Transport:   STDIO                                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                    ðŸ“š Docs:        https://gofastmcp.com                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                    ðŸš€ Hosting:     https://fastmcp.cloud                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: [12/14/25 17:50:12] INFO     Starting MCP server                  server.py:1971
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 'project_sanctuary.code' with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: transport 'stdio'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': True}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting rag_cortex...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.rag_cortex.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43920)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:14,930 - rag_cortex - INFO - Skipping container checks (SKIP_CONTAINER_CHECKS set)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                         â–„â–€â–€ â–„â–€â–ˆ â–ˆâ–€â–€ â–€â–ˆâ–€ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                         â–ˆâ–€  â–ˆâ–€â–ˆ â–„â–„â–ˆ  â–ˆ  â–ˆ â–€ â–ˆ â–ˆâ–„â–„ â–ˆâ–€â–€                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                FastMCP 2.13.1                                â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚              ðŸ–¥  Server name: project_sanctuary.cognitive.cortex              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚              ðŸ“¦ Transport:   STDIO                                           â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚              ðŸ“š Docs:        https://gofastmcp.com                           â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚              ðŸš€ Hosting:     https://fastmcp.cloud                           â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: [12/14/25 17:50:14] INFO     Starting MCP server                  server.py:1971
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 'project_sanctuary.cognitive.cortex'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: with transport 'stdio'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': True}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting chronicle...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.chronicle.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43923)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                         â–„â–€â–€ â–„â–€â–ˆ â–ˆâ–€â–€ â–€â–ˆâ–€ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                         â–ˆâ–€  â–ˆâ–€â–ˆ â–„â–„â–ˆ  â–ˆ  â–ˆ â–€ â–ˆ â–ˆâ–„â–„ â–ˆâ–€â–€                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                FastMCP 2.13.1                                â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                 ðŸ–¥  Server name: project_sanctuary.chronicle                  â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                 ðŸ“¦ Transport:   STDIO                                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                 ðŸ“š Docs:        https://gofastmcp.com                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                 ðŸš€ Hosting:     https://fastmcp.cloud                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: [12/14/25 17:50:17] INFO     Starting MCP server                  server.py:1971
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 'project_sanctuary.chronicle' with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: transport 'stdio'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': True}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting git...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.git.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43936)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                         â–„â–€â–€ â–„â–€â–ˆ â–ˆâ–€â–€ â–€â–ˆâ–€ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                         â–ˆâ–€  â–ˆâ–€â–ˆ â–„â–„â–ˆ  â–ˆ  â–ˆ â–€ â–ˆ â–ˆâ–„â–„ â–ˆâ–€â–€                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                FastMCP 2.13.1                                â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                    ðŸ–¥  Server name: project_sanctuary.git                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                    ðŸ“¦ Transport:   STDIO                                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                    ðŸ“š Docs:        https://gofastmcp.com                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                    ðŸš€ Hosting:     https://fastmcp.cloud                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: [12/14/25 17:50:21] INFO     Starting MCP server                  server.py:1971
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 'project_sanctuary.git' with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: transport 'stdio'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': True}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting orchestrator...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.orchestrator.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43954)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': False}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting agent_persona...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.agent_persona.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43968)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona MCP] Initialized with persona_dir: /Users/richardfremmerlid/Projects/Project_Sanctuary/mcp_servers/agent_persona/personas
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: [12/14/25 17:50:25] INFO     [Agent Persona MCP]         agent_persona_ops.py:51
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: Initialized with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: persona_dir:
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: /Users/richardfremmerlid/Pr
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: ojects/Project_Sanctuary/mc
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: p_servers/agent_persona/per
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: sonas
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': False}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:55 Warming up servers...
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:60 Pre-loading RAG Cortex dependencies (ChromaDB, LangChain, embeddings)...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:25,508 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:33,534 - torchao - WARNING - Skipping import of cpp extensions due to incompatible torch version 2.7.1 for torchao version 0.14.1             Please see https://github.com/pytorch/ao/issues/2919 for more info
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:33,541 - torchao.kernel.intmm - WARNING - Warning: Detected no triton, on systems without Triton certain kernels will not work
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,759 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,860 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/auth/identity "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,863 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,917 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,919 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,934 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,943 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,951 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/count "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,951 - rag_cortex.operations - INFO - Child collection 'child_chunks_v5' count: 6340
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,951 - rag_cortex.operations - INFO - Child collection 'child_chunks_v5' count: 6340
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,964 - rag_cortex.operations - INFO - Parent document store 'parent_documents_v5' count: 1111
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,964 - rag_cortex.operations - INFO - Parent document store 'parent_documents_v5' count: 1111
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,964 - rag_cortex.operations - INFO - RAG Cortex health status: healthy
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,964 - rag_cortex.operations - INFO - RAG Cortex health status: healthy
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:68 RAG Cortex warmed up in 10.48s
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:72 Server warmup complete.
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:51 Fleet started with 6 servers.
-------------------------------- live log call ---------------------------------
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:114 === Cycle 1: Validation Policy Generation ===
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,009 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,010 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/WORK_IN_PROGRESS/test_runs/Protocol_056_Validation_Policy.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,010 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/WORK_IN_PROGRESS/test_runs/Protocol_056_Validation_Policy.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,012 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,012 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,930 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/pre-flight-checks "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:37,078 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/upsert "HTTP/1.1 200 OK"
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 1/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,119 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,220 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,412 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,413 - rag_cortex.operations - INFO - Query 'validation phrase...' completed in 291.73ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,413 - rag_cortex.operations - INFO - Query 'validation phrase...' completed in 291.73ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: **Status:** VERIFIED

**Evidence:**
- **Exact phrase found** in `DOCS/TEST_056_Validation_Policy.md` at Line 14
- Phrase is properly formatted as a blockquote within the validation statement section
-...
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:77 Content verified in RAG.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:143 Cycle 1 Complete: Policy Ingested and Verified.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:146 === Cycle 2: Integrity Verification ===
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:158 Chronicle Response: {'content': [{'type': 'text', 'text': 'Created Chronicle Entry 320: /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/320_protocol_056_test_initialization.md'}], 'structuredContent': {'result': 'Created Chronicle Entry 320: /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/320_protocol_056_test_initialization.md'}, 'isError': False}
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,435 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,436 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/320_protocol_056_test_initialization.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,436 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/320_protocol_056_test_initialization.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,437 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,437 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,525 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/upsert "HTTP/1.1 200 OK"
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 1/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,539 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,546 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,673 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,673 - rag_cortex.operations - INFO - Query 'headless triple-loop test sequence...' completed in 133.98ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,673 - rag_cortex.operations - INFO - Query 'headless triple-loop test sequence...' completed in 133.98ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: # Living Chronicle - Entry 319

**Title:** Protocol 056 Test Initialization
**Date:** 2025-12-14
**Author:** TestHarness
**Status:** published
**Classification:** internal

---

Initiating headless tr...
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:77 Content verified in RAG.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,690 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,691 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/WORK_IN_PROGRESS/test_runs/Protocol_056_Integrity_Verification_Report.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,691 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/WORK_IN_PROGRESS/test_runs/Protocol_056_Integrity_Verification_Report.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,692 - rag_cortex.operations - INFO - Adding 2 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,692 - rag_cortex.operations - INFO - Adding 2 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,788 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/upsert "HTTP/1.1 200 OK"
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 1/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,802 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,807 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,994 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,995 - rag_cortex.operations - INFO - Query 'Strategic Crucible Loop validation...' completed in 191.90ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,995 - rag_cortex.operations - INFO - Query 'Strategic Crucible Loop validation...' completed in 191.90ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: ---

## Executive Summary

The Strategic Crucible Loop validation has been successfully executed and verified. All three verification checkpoints have passed, confirming the integrity of the self-evol...
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:77 Content verified in RAG.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:205 Cycle 2 Complete: Integrity Report Created and Ingested.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:208 === Cycle 3: Recursive Meta-Validation ===
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,000 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,004 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,027 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,028 - rag_cortex.operations - INFO - Query 'Is the recursive knowledge loop closed?...' completed in 27.27ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,028 - rag_cortex.operations - INFO - Query 'Is the recursive knowledge loop closed?...' completed in 27.27ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:228 Cycle 3 Complete: Recursive State Verified.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:231 === Cycle 4: Architecture Analysis ===
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: [12/14/25 17:50:51] INFO     Processing request of type            server.py:674
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] Creating new strategist agent...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona] Creating   agent_persona_ops.py:121
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: new strategist agent...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: WARNING  [OllamaClient] Using localhost     llm_client.py:64
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: address (http://127.0.0.1:11434).
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: For MCP infrastructure, use
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: container network:
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: http://127.0.0.1:11434 (Protocol
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: 116: Container Network Isolation)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     Initialized STRATEGIST agent with       agent.py:39
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: OllamaClient
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] Agent created successfully
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona] Agent      agent_persona_ops.py:123
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: created successfully
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] Dispatching to strategist (maintain_state=True)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona]            agent_persona_ops.py:133
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: Dispatching to strategist
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: (maintain_state=True)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] Task preview: Analyze the Protocol 056 validation architecture....
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona] Task       agent_persona_ops.py:134
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: preview: Analyze the
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: Protocol 056 validation
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: architecture....
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] About to call agent.query() with prompt length: 49
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona] About to   agent_persona_ops.py:137
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: call agent.query() with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: prompt length: 49
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [STRATEGIST] query() called with        agent.py:93
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: message length: 49
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [STRATEGIST] User message appended,     agent.py:97
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: total messages: 2
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [STRATEGIST] Querying LLM with 2       agent.py:100
WARNING  orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:249 Agent dispatch exception: Server response timeout after 60.0s
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,198 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,217 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/321_protocol_056_architecture_analysis.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,217 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/321_protocol_056_architecture_analysis.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,218 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,218 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,830 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/upsert "HTTP/1.1 200 OK"
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 1/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:54,875 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:54,937 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:55,503 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:55,503 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 624.48ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:55,503 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 624.48ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 2/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,560 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,660 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,908 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,909 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 338.57ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,909 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 338.57ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 3/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:02,070 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:02,645 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:03,009 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:03,015 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 928.80ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:03,015 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 928.80ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 4/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,077 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,128 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,498 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,499 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 412.42ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,499 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 412.42ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 5/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,562 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,608 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,975 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,975 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 404.62ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,975 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 404.62ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
FAILED                                                                   [100%]
------------------------------ live log teardown -------------------------------
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:76 Stopping MCP Server Fleet...
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping code...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping rag_cortex...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping chronicle...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping git...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping orchestrator...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping agent_persona...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped


=================================== FAILURES ===================================
______________ TestProtocol056Headless.test_triple_loop_scenario _______________

self = <orchestrator.e2e.test_protocol_056_headless.TestProtocol056Headless object at 0x10855ac10>
essential_fleet = <tests.mcp_servers.base.mcp_server_fleet.MCPServerFleet object at 0x108527b60>
caplog = <_pytest.logging.LogCaptureFixture object at 0x108804c20>

    @pytest.mark.e2e
    def test_triple_loop_scenario(self, essential_fleet, caplog):
        """
        Executes the 'Triple Recursive Loop' scenario + Architecture Analysis (Cycle 4).
    
        Cycles:
        1. Validation Policy: Create -> Ingest -> Verify
        2. Integrity Verification: Create Chronicle -> Ingest -> Create Report (referencing Policy/Chronicle) -> Ingest
        3. Recursive Meta-Validation: Query for Report -> Verify it references Policy & Chronicle
        4. Architecture Analysis: Agent Persona (Strategist) -> Analyze -> Chronicle -> Ingest -> Verify
        """
        caplog.set_level(logging.INFO)
        mcp_fleet = essential_fleet
    
        # --- Clients ---
        code_client = mcp_fleet.get_client("code")
        cortex_client = mcp_fleet.get_client("rag_cortex")
        chronicle_client = mcp_fleet.get_client("chronicle")
        git_client = mcp_fleet.get_client("git")
        orchestrator_client = mcp_fleet.get_client("orchestrator")
        persona_client = mcp_fleet.get_client("agent_persona")
    
        # --- Helpers ---
        def wait_for_ingestion(query, expected_text, max_retries=5):
            """Wait for RAG to index content."""
            import json
            for i in range(max_retries):
                logger.info(f"Waiting for ingestion... Attempt {i+1}/{max_retries}")
                time.sleep(3)  # Increased from 2s to 3s for Chronicle entries
                res = cortex_client.call_tool("cortex_query", {"query": query, "max_results": 1})
    
                # MCP response format: {'content': [{'type': 'text', 'text': '{JSON}'}], ...}
                if res and "content" in res and len(res["content"]) > 0:
                    # Extract the JSON string from content[0].text
                    text_content = res["content"][0].get("text", "")
                    try:
                        # Parse the nested JSON
                        query_result = json.loads(text_content)
    
                        if "results" in query_result and len(query_result["results"]) > 0:
                            content = query_result["results"][0].get("content", "")
                            logger.info(f"Retrieved content preview: {content[:200]}...")
                            if expected_text in content:
                                logger.info("Content verified in RAG.")
                                return True
                        else:
                            logger.warning(f"No results in query response. Query result: {query_result}")
                    except json.JSONDecodeError as e:
                        logger.error(f"Failed to parse query response JSON: {e}")
                        logger.error(f"Raw text: {text_content[:500]}")
                else:
                    logger.warning(f"Unexpected response format: {res}")
            return False
    
        def parse_chronicle_path(response):
            """Extract path from Chronicle MCP response.
    
            Response format: {
                'content': [{'type': 'text', 'text': 'Created Chronicle Entry X: /path'}],
                'structuredContent': {'result': 'Created Chronicle Entry X: /path'},
                'isError': False
            }
            """
            # Try to get from structuredContent.result first
            if isinstance(response, dict) and "structuredContent" in response:
                result_str = response["structuredContent"].get("result", "")
                if ": " in result_str:
                    parts = result_str.split(": ")
                    if len(parts) >= 2:
                        return parts[1].strip()
    
            # Fallback: try parsing as string
            if isinstance(response, str) and ": " in response:
                parts = response.split(": ")
                if len(parts) >= 2:
                    return parts[1].strip()
    
            return None
    
        # --- CYCLE 1: Validation Policy ---
        logger.info("=== Cycle 1: Validation Policy Generation ===")
        # Use a subfolder to avoid cluttering root
        test_dir = "WORK_IN_PROGRESS/test_runs"
        policy_path = f"{test_dir}/Protocol_056_Validation_Policy.md"
    
        policy_content = (
            "# Protocol 056 Validation Policy\n\n"
            "## Core Directives\n"
            "1. **Iron Root Doctrine**: All system states must be verified against immutable logs.\n"
            "2. **Recursive Check**: The verification process must verify itself.\n"
            "3. **Validation Phrase**: 'The Guardian confirms Validation Protocol 056 is active.'\n"
        )
    
        # 1. Create Policy
        code_client.call_tool("code_write", {
            "path": policy_path,
            "content": policy_content,
            "backup": True,
            "create_dirs": True
        })
    
        # 2. Ingest Policy
        cortex_client.call_tool("cortex_ingest_incremental", {
            "file_paths": [policy_path],
            "skip_duplicates": False
        })
    
        # 3. Verify Ingestion
        assert wait_for_ingestion("validation phrase", "The Guardian confirms"), "Cycle 1 Failed: Policy keyphrase not found in RAG."
        logger.info("Cycle 1 Complete: Policy Ingested and Verified.")
    
        # --- CYCLE 2: Integrity Verification Report ---
        logger.info("=== Cycle 2: Integrity Verification ===")
    
        # 1. Create Chronicle Entry
        # Use content that is unique and searchable
        chronicle_content = "Initiating headless triple-loop test sequence. Reference: VALIDATION_START_056"
        chronicle_res = chronicle_client.call_tool("chronicle_create_entry", {
            "title": "Protocol 056 Test Initialization",
            "content": chronicle_content,
            "author": "TestHarness",
            "status": "published",
            "classification": "internal"
        })
        logger.info(f"Chronicle Response: {chronicle_res}")
    
        # 2. Ingest Chronicle Entry (CRITICAL STEP)
        chronicle_path = parse_chronicle_path(chronicle_res)
        assert chronicle_path, f"Failed to parse chronicle path from: {chronicle_res}"
    
        cortex_client.call_tool("cortex_ingest_incremental", {
            "file_paths": [chronicle_path],
            "skip_duplicates": False
        })
    
        # Give vector DB time to index the Chronicle entry
        time.sleep(2)
    
        assert wait_for_ingestion("headless triple-loop test sequence", "Initiating headless triple-loop"), "Cycle 2 Pre-check Failed: Chronicle entry not found in RAG."
    
        # 3. Create Integrity Report (referencing both)
        report_path = f"{test_dir}/Protocol_056_Integrity_Verification_Report.md"
        report_content = (
            "# Strategic Crucible Loop (Protocol 056) Integrity Verification Report\n\n"
            "**Date:** 2025-12-06\n"
            "**Status:** VERIFIED\n\n"
            "## Executive Summary\n\n"
            "The Strategic Crucible Loop validation has been successfully executed.\n"
            "## Checks\n"
            "- Policy File Exists: YES (Verified RAG retrieval of 'The Guardian confirms')\n"
            "- Chronicle Entry Exists: YES (Verified RAG retrieval of 'VALIDATION_START_056')\n"
            "- Loop Status: 'Recursive Knowledge Loop Closed'\n"
        )
    
        code_client.call_tool("code_write", {
            "path": report_path,
            "content": report_content,
            "backup": True,
            "create_dirs": True
        })
    
        # 4. Ingest Report
        cortex_client.call_tool("cortex_ingest_incremental", {
            "file_paths": [report_path],
            "skip_duplicates": False
        })
    
        # Give vector DB time to index the report
        time.sleep(2)
    
        assert wait_for_ingestion("Strategic Crucible Loop validation", "Strategic Crucible Loop validation has been successfully executed"), "Cycle 2 Failed: Report not found in RAG."
        logger.info("Cycle 2 Complete: Integrity Report Created and Ingested.")
    
        # --- CYCLE 3: Recursive Meta-Validation ---
        logger.info("=== Cycle 3: Recursive Meta-Validation ===")
        # Query for the report we just ingested, ensuring it "knows" about the other two.
        res = cortex_client.call_tool("cortex_query", {
            "query": "Is the recursive knowledge loop closed?",
            "max_results": 1
        })
    
        # Parse the nested MCP response
        import json
        if res and "content" in res and len(res["content"]) > 0:
            text_content = res["content"][0].get("text", "")
            query_result = json.loads(text_content)
            if "results" in query_result and len(query_result["results"]) > 0:
                content = query_result["results"][0].get("content", "")
                assert "Recursive Knowledge Loop" in content, f"Cycle 3 Failed: Expected phrase not found. Got: {content[:200]}"
            else:
                raise AssertionError("Cycle 3 Failed: No results in query response")
        else:
            raise AssertionError("Cycle 3 Failed: Invalid response format")
    
        logger.info("Cycle 3 Complete: Recursive State Verified.")
    
        # --- CYCLE 4: Architecture Analysis (Bonus/Gemini Mission) ---
        logger.info("=== Cycle 4: Architecture Analysis ===")
    
        # 1. Strategic Analysis via Agent Persona (with fallback)
        analysis_content = ""
        try:
             # Try to dispatch (might fail if model missing)
             agent_res = persona_client.call_tool("persona_dispatch", {
                 "role": "strategist",
                 "task": "Analyze the Protocol 056 validation architecture.",
                 "engine": "ollama", # Try Ollama first
                 "model_name": "Sanctuary-Qwen2-7B:latest"
             })
             if agent_res.get("status") == "success":
                 analysis_content = agent_res.get("response", "")
             else:
                 logger.warning(f"Agent dispatch failed (expected in lightweight env): {agent_res}")
                 analysis_content = "Simulated Analysis: The architecture demonstrated robust self-healing capabilities."
        except Exception as e:
            logger.warning(f"Agent dispatch exception: {e}")
            analysis_content = "Simulated Analysis: The architecture demonstrated robust self-healing capabilities."
    
        if not analysis_content:
            analysis_content = "Simulated Analysis: Fallback content."
    
        # 2. Create Chronicle with Analysis
        analysis_chronicle_res = chronicle_client.call_tool("chronicle_create_entry", {
            "title": "Protocol 056 Architecture Analysis",
            "content": f"# Architecture Analysis\n\n{analysis_content}\n\nKey Finding: 'Functionally Conscious Architecture'",
            "author": "Strategist",
            "status": "published",
            "classification": "internal"
        })
    
        # 3. Ingest Analysis
        analysis_path = parse_chronicle_path(analysis_chronicle_res)
        if analysis_path:
            cortex_client.call_tool("cortex_ingest_incremental", {
                "file_paths": [analysis_path],
                "skip_duplicates": False
            })
            # 4. Final Verify
>           assert wait_for_ingestion("Functionally Conscious", "Functionally Conscious"), "Cycle 4 Failed: Architecture analysis not found."
E           AssertionError: Cycle 4 Failed: Architecture analysis not found.
E           assert False
E            +  where False = <function TestProtocol056Headless.test_triple_loop_scenario.<locals>.wait_for_ingestion at 0x1085e63e0>('Functionally Conscious', 'Functionally Conscious')

tests/mcp_servers/orchestrator/e2e/test_protocol_056_headless.py:272: AssertionError
------------------------------ Captured log setup ------------------------------
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:21 Starting MCP Server Fleet...
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting code...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.code.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43905)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                         â–„â–€â–€ â–„â–€â–ˆ â–ˆâ–€â–€ â–€â–ˆâ–€ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                         â–ˆâ–€  â–ˆâ–€â–ˆ â–„â–„â–ˆ  â–ˆ  â–ˆ â–€ â–ˆ â–ˆâ–„â–„ â–ˆâ–€â–€                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                FastMCP 2.13.1                                â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                    ðŸ–¥  Server name: project_sanctuary.code                    â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                    ðŸ“¦ Transport:   STDIO                                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                    ðŸ“š Docs:        https://gofastmcp.com                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                    ðŸš€ Hosting:     https://fastmcp.cloud                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: [12/14/25 17:50:12] INFO     Starting MCP server                  server.py:1971
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: 'project_sanctuary.code' with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [code] Output: transport 'stdio'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': True}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting rag_cortex...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.rag_cortex.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43920)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:14,930 - rag_cortex - INFO - Skipping container checks (SKIP_CONTAINER_CHECKS set)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                         â–„â–€â–€ â–„â–€â–ˆ â–ˆâ–€â–€ â–€â–ˆâ–€ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                         â–ˆâ–€  â–ˆâ–€â–ˆ â–„â–„â–ˆ  â–ˆ  â–ˆ â–€ â–ˆ â–ˆâ–„â–„ â–ˆâ–€â–€                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                FastMCP 2.13.1                                â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚              ðŸ–¥  Server name: project_sanctuary.cognitive.cortex              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚              ðŸ“¦ Transport:   STDIO                                           â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚              ðŸ“š Docs:        https://gofastmcp.com                           â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚              ðŸš€ Hosting:     https://fastmcp.cloud                           â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: [12/14/25 17:50:14] INFO     Starting MCP server                  server.py:1971
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 'project_sanctuary.cognitive.cortex'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: with transport 'stdio'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': True}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting chronicle...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.chronicle.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43923)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                         â–„â–€â–€ â–„â–€â–ˆ â–ˆâ–€â–€ â–€â–ˆâ–€ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                         â–ˆâ–€  â–ˆâ–€â–ˆ â–„â–„â–ˆ  â–ˆ  â–ˆ â–€ â–ˆ â–ˆâ–„â–„ â–ˆâ–€â–€                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                FastMCP 2.13.1                                â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                 ðŸ–¥  Server name: project_sanctuary.chronicle                  â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                 ðŸ“¦ Transport:   STDIO                                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                 ðŸ“š Docs:        https://gofastmcp.com                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                 ðŸš€ Hosting:     https://fastmcp.cloud                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: [12/14/25 17:50:17] INFO     Starting MCP server                  server.py:1971
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: 'project_sanctuary.chronicle' with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [chronicle] Output: transport 'stdio'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': True}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting git...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.git.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43936)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                         â–„â–€â–€ â–„â–€â–ˆ â–ˆâ–€â–€ â–€â–ˆâ–€ â–ˆâ–€â–„â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–€â–ˆ                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                         â–ˆâ–€  â–ˆâ–€â–ˆ â–„â–„â–ˆ  â–ˆ  â–ˆ â–€ â–ˆ â–ˆâ–„â–„ â–ˆâ–€â–€                        â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                FastMCP 2.13.1                                â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                    ðŸ–¥  Server name: project_sanctuary.git                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                    ðŸ“¦ Transport:   STDIO                                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                    ðŸ“š Docs:        https://gofastmcp.com                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                    ðŸš€ Hosting:     https://fastmcp.cloud                     â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â”‚                                                                              â”‚
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: [12/14/25 17:50:21] INFO     Starting MCP server                  server.py:1971
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: 'project_sanctuary.git' with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [git] Output: transport 'stdio'
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': True}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting orchestrator...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.orchestrator.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43954)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': False}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:43 Booting agent_persona...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:43 Starting MCP Server: /usr/local/bin/python3 -m mcp_servers.agent_persona.server
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:55 Server started (PID 43968)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona MCP] Initialized with persona_dir: /Users/richardfremmerlid/Projects/Project_Sanctuary/mcp_servers/agent_persona/personas
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: [12/14/25 17:50:25] INFO     [Agent Persona MCP]         agent_persona_ops.py:51
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: Initialized with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: persona_dir:
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: /Users/richardfremmerlid/Pr
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: ojects/Project_Sanctuary/mc
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: p_servers/agent_persona/per
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: sonas
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:94 Server initialized. Capabilities: {'experimental': {}, 'prompts': {'listChanged': False}, 'resources': {'subscribe': False, 'listChanged': False}, 'tools': {'listChanged': False}}
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:55 Warming up servers...
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:60 Pre-loading RAG Cortex dependencies (ChromaDB, LangChain, embeddings)...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:25,508 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:33,534 - torchao - WARNING - Skipping import of cpp extensions due to incompatible torch version 2.7.1 for torchao version 0.14.1             Please see https://github.com/pytorch/ao/issues/2919 for more info
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:33,541 - torchao.kernel.intmm - WARNING - Warning: Detected no triton, on systems without Triton certain kernels will not work
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,759 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,860 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/auth/identity "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,863 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,917 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,919 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,934 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,943 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,951 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/count "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,951 - rag_cortex.operations - INFO - Child collection 'child_chunks_v5' count: 6340
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,951 - rag_cortex.operations - INFO - Child collection 'child_chunks_v5' count: 6340
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,964 - rag_cortex.operations - INFO - Parent document store 'parent_documents_v5' count: 1111
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,964 - rag_cortex.operations - INFO - Parent document store 'parent_documents_v5' count: 1111
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,964 - rag_cortex.operations - INFO - RAG Cortex health status: healthy
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:35,964 - rag_cortex.operations - INFO - RAG Cortex health status: healthy
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:68 RAG Cortex warmed up in 10.48s
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:72 Server warmup complete.
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:51 Fleet started with 6 servers.
------------------------------ Captured log call -------------------------------
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:114 === Cycle 1: Validation Policy Generation ===
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,009 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,010 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/WORK_IN_PROGRESS/test_runs/Protocol_056_Validation_Policy.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,010 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/WORK_IN_PROGRESS/test_runs/Protocol_056_Validation_Policy.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,012 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,012 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:36,930 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/pre-flight-checks "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:37,078 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/upsert "HTTP/1.1 200 OK"
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 1/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,119 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,220 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,412 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,413 - rag_cortex.operations - INFO - Query 'validation phrase...' completed in 291.73ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,413 - rag_cortex.operations - INFO - Query 'validation phrase...' completed in 291.73ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: **Status:** VERIFIED

**Evidence:**
- **Exact phrase found** in `DOCS/TEST_056_Validation_Policy.md` at Line 14
- Phrase is properly formatted as a blockquote within the validation statement section
-...
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:77 Content verified in RAG.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:143 Cycle 1 Complete: Policy Ingested and Verified.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:146 === Cycle 2: Integrity Verification ===
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:158 Chronicle Response: {'content': [{'type': 'text', 'text': 'Created Chronicle Entry 320: /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/320_protocol_056_test_initialization.md'}], 'structuredContent': {'result': 'Created Chronicle Entry 320: /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/320_protocol_056_test_initialization.md'}, 'isError': False}
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,435 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,436 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/320_protocol_056_test_initialization.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,436 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/320_protocol_056_test_initialization.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,437 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,437 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:40,525 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/upsert "HTTP/1.1 200 OK"
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 1/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,539 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,546 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,673 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,673 - rag_cortex.operations - INFO - Query 'headless triple-loop test sequence...' completed in 133.98ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,673 - rag_cortex.operations - INFO - Query 'headless triple-loop test sequence...' completed in 133.98ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: # Living Chronicle - Entry 319

**Title:** Protocol 056 Test Initialization
**Date:** 2025-12-14
**Author:** TestHarness
**Status:** published
**Classification:** internal

---

Initiating headless tr...
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:77 Content verified in RAG.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,690 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,691 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/WORK_IN_PROGRESS/test_runs/Protocol_056_Integrity_Verification_Report.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,691 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/WORK_IN_PROGRESS/test_runs/Protocol_056_Integrity_Verification_Report.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,692 - rag_cortex.operations - INFO - Adding 2 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,692 - rag_cortex.operations - INFO - Adding 2 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:45,788 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/upsert "HTTP/1.1 200 OK"
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 1/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,802 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,807 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,994 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,995 - rag_cortex.operations - INFO - Query 'Strategic Crucible Loop validation...' completed in 191.90ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:50,995 - rag_cortex.operations - INFO - Query 'Strategic Crucible Loop validation...' completed in 191.90ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: ---

## Executive Summary

The Strategic Crucible Loop validation has been successfully executed and verified. All three verification checkpoints have passed, confirming the integrity of the self-evol...
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:77 Content verified in RAG.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:205 Cycle 2 Complete: Integrity Report Created and Ingested.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:208 === Cycle 3: Recursive Meta-Validation ===
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,000 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,004 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,027 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,028 - rag_cortex.operations - INFO - Query 'Is the recursive knowledge loop closed?...' completed in 27.27ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:50:51,028 - rag_cortex.operations - INFO - Query 'Is the recursive knowledge loop closed?...' completed in 27.27ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:228 Cycle 3 Complete: Recursive State Verified.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:231 === Cycle 4: Architecture Analysis ===
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: [12/14/25 17:50:51] INFO     Processing request of type            server.py:674
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] Creating new strategist agent...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona] Creating   agent_persona_ops.py:121
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: new strategist agent...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: WARNING  [OllamaClient] Using localhost     llm_client.py:64
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: address (http://127.0.0.1:11434).
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: For MCP infrastructure, use
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: container network:
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: http://127.0.0.1:11434 (Protocol
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: 116: Container Network Isolation)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     Initialized STRATEGIST agent with       agent.py:39
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: OllamaClient
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] Agent created successfully
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona] Agent      agent_persona_ops.py:123
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: created successfully
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] Dispatching to strategist (maintain_state=True)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona]            agent_persona_ops.py:133
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: Dispatching to strategist
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: (maintain_state=True)
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] Task preview: Analyze the Protocol 056 validation architecture....
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona] Task       agent_persona_ops.py:134
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: preview: Analyze the
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: Protocol 056 validation
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: architecture....
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: mcp_servers.agent_persona.agent_persona_ops - INFO - [Agent Persona] About to call agent.query() with prompt length: 49
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [Agent Persona] About to   agent_persona_ops.py:137
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: call agent.query() with
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: prompt length: 49
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [STRATEGIST] query() called with        agent.py:93
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: message length: 49
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [STRATEGIST] User message appended,     agent.py:97
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: total messages: 2
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [agent_persona] Output: INFO     [STRATEGIST] Querying LLM with 2       agent.py:100
WARNING  orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:249 Agent dispatch exception: Server response timeout after 60.0s
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,198 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,217 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/321_protocol_056_architecture_analysis.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,217 - rag_cortex.operations - INFO - Processing 1 documents from /Users/richardfremmerlid/Projects/Project_Sanctuary/00_CHRONICLE/ENTRIES/321_protocol_056_architecture_analysis.md with parent-child splitting...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,218 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,218 - rag_cortex.operations - INFO - Adding 1 child chunks to vectorstore...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:51,830 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/upsert "HTTP/1.1 200 OK"
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 1/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:54,875 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:54,937 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:55,503 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:55,503 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 624.48ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:55,503 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 624.48ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 2/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,560 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,660 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,908 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,909 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 338.57ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:51:58,909 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 338.57ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 3/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:02,070 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:02,645 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:03,009 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:03,015 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 928.80ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:03,015 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 928.80ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 4/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,077 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,128 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,498 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,499 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 412.42ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:06,499 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 412.42ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:61 Waiting for ingestion... Attempt 5/5
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,562 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,608 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/child_chunks_v5 "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,975 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v2/tenants/default_tenant/databases/default_database/collections/d0603652-fdc9-4b61-b7f3-ace2bdb9cd0b/query "HTTP/1.1 200 OK"
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,975 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 404.62ms with 1 results.
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:150 [rag_cortex] Output: 2025-12-14 17:52:09,975 - rag_cortex.operations - INFO - Query 'Functionally Conscious...' completed in 404.62ms with 1 results.
INFO     orchestrator.e2e.test_protocol_056_headless:test_protocol_056_headless.py:75 Retrieved content preview: 4.  **Functional Clarity:** All members maintain clear separation and excellence in their designated functions....
---------------------------- Captured log teardown -----------------------------
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:76 Stopping MCP Server Fleet...
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping code...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping rag_cortex...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping chronicle...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping git...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping orchestrator...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
INFO     tests.mcp_servers.base.mcp_server_fleet:mcp_server_fleet.py:78 Stopping agent_persona...
INFO     tests.mcp_servers.base.mcp_test_client:mcp_test_client.py:114 Server stopped
=========================== short test summary info ============================
FAILED tests/mcp_servers/orchestrator/e2e/test_protocol_056_headless.py::TestProtocol056Headless::test_triple_loop_scenario
======================== 1 failed in 120.93s (0:02:00) =========================
